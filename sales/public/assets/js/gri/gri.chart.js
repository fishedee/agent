!function(a){a.fn.multiChart=function(b){var c=b,d=a(this).attr("id"),e="#"+d,f=b.chartType||"";if(a(e).empty(),c.hasOwnProperty("isMultiChart")){var g=1;for(var h in c.data){var i=c.data[h],j=i.width||"100%",k=d+g++;a(e).append("<div id='"+k+"' style='float:left;width:"+j+"'></div>"),a("#"+k).createChart({chartType:f,dataFormat:1,categories:i.data.categories,series:i.data.series,chartOptions:i.data.chartOptions})}}else a(e).createChart(c)},a.fn.createChart=function(b){function c(a,b){switch(a){case 1:b=Highcharts.numberFormat(b,0);break;case 2:b=Highcharts.numberFormat(b,2);break;case 3:b=Highcharts.numberFormat(b,2);break;case 4:var c=function(a){var b=parseInt(a/3600),c="00"+parseInt(a%3600/60),d="00"+parseInt(a%3600%60);return c=c.substr(c.length-2,2),d=d.substr(d.length-2,2),b+":"+c+":"+d};b=c(b);break;case 5:b=Highcharts.numberFormat(100*b,2)}return b}function d(){if(0==maxY)return void(o.yAxis.max=100);if("column"!=o.chart.type||!o.plotOptions.column||!o.plotOptions.column.stacking){for(var a=parseInt((maxY-m)/b.maxYAxisIntervalCount),c=o.yAxis,d=10;a>d;)d*=10;if(d>=1e3){for(var e=1;10>=e;e++)if(e*d/10>a){a=parseInt((e-1)*d/10);break}}else a=1*d/4>a?d/10:3*d/4>a?d/2:d;c.allowDecimals=!1,c.tickInterval=a}}function e(){return"pie"!==o.chart.type}function f(a){var b=new Date(a),c=isNaN(b)?a:b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate();return c}function g(a){var b=[];for(var c in a)b.push(a[c]);return b}function h(b){var c,d=[];if(a.isArray(b))for(var e in b){var f=b[e];c=i(f),d.push(c)}else c=i(b),d.push(c);return d}function i(b){if(!b)return{name:" ",data:[]};var c={name:b.name||"",data:[]};c=a.extend(!0,c,b),c.data=[];var d=b.data||[],f=[],g=0,h=0;for(var i in d){var j,k=d[i];j=k,e()&&(j.marker=j.marker||{},"undefined"==typeof j.marker.enabled&&(j.marker.enabled=!1)),null!=j.y&&(n=!0,g++,maxY=maxY>j.y?maxY:j.y,h+=j.y),f.push(j)}for(var l in f){var k=f[l];null!=k.y&&(e()&&(k.marker.enabled=7>=g),k.percentage=Math.round(parseFloat(1e4*k.y)/h)/100)}return c.data=f,c}function j(){m>=maxY||(midY=(maxY-m)/2,o.yAxis.plotLines=[{dashStyle:"longdashdot",color:"red",width:1,value:midY,label:{text:"中位线"}}])}var k={title:{margin:20,y:20},colors:["#49C9C3","#FFBF3E","#9DD30D","#DA7D2A","#39B54A","#1CC4F5","#1C95BD","#5674B9","#8560A8","#9999FF"],lang:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],weekdays:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],resetZoom:"查看全图",resetZoomTitle:"查看全图",downloadPNG:"下载PNG",downloadJPEG:"下载JPEG",downloadPDF:"下载PDF",downloadSVG:"下载SVG",exportButtonTitle:"导出成图片",printButtonTitle:"打印图表",loading:"数据加载中，请稍候..."},chart:{borderWidth:0,selectionMarkerFill:"rgba(122, 201, 67, 0.25)",style:{fontFamily:'Tahoma, "microsoft yahei", 微软雅黑, 宋体;'},resetZoomButton:{theme:{fill:"white",stroke:"silver",r:0,states:{hover:{fill:"#41739D",style:{color:"white"}}}}}},xAxis:{startOnTick:!1,lineColor:"#6a7791",lineWidth:1,tickPixelInterval:150,tickmarkPlacement:"on"},yAxis:{title:{text:""},min:0,gridLineColor:"#eae9e9",showFirstLabel:!1},plotOptions:{pie:{allowPointSelect:!0,innerSize:"45%",cursor:"pointer",dataLabels:{enabled:!1,color:"#000000",connectorColor:"#000000"}},series:{pointPalcemeng:"on",fillOpacity:.1,shadow:!1,dataLabels:{enabled:!0},marker:{enabled:!0,radius:4,fillColor:null,lineWidth:2,lineColor:"#FFFFFF",states:{hover:{enabled:!0}}}}},legend:{borderWidth:0,verticalAlign:"bottom",maxHeight:57},tooltip:{borderColor:"#666",borderWidth:1,borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.7)",useHTML:!0,crosshairs:{color:"#7ac943",dashStyle:"shortdot"},shared:!0},credits:{enabled:!1,href:"http://ta.qq.com",text:"ta.qq.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:0}}},l={title:"",width:"100%",height:300,showLabel:!0,showMarker:!0,chartType:"area",dataFormat:1,labelFormat:0,categories:[],series:[],yMin:null,yMax:null,xAxisLabelStep:0,xAxisTickInterval:0,useDefaultStyle:!0,enableZoom:!0,autoStep:!0,showPlotLine:!1,enableLegend:!0,autoYAxisInterval:!0,maxYAxisIntervalCount:3,chartOptions:{chart:{},title:{},xAxis:{categories:"",labels:{}},yAxis:{min:0},plotOptions:{pie:{},series:{dataLabels:{}}},legend:{},tooltip:{}}},m=maxY=0,n=!1;b=a.extend(!0,l,b),b.useDefaultStyle&&Highcharts.setOptions(k),a(this).css("height",b.height);var o=b.chartOptions,p={area:"area",line:"line",pie:"pie",bar:"bar",spline:"spline",column:"column"}[b.chartType]||"area";if(o.chart.type=o.chart.type||p,o.yAxis.dataFormat=o.yAxis.dataFormat||b.dataFormat,"object"==typeof b.title?o.title=b.title:o.title.text=b.title,o.legend.enabled=b.enableLegend,b.categories){var q=!1,r=0,s=0;for(var t in b.categories){var u=b.categories[t].toString();if(r<u.length&&(r=u.length),0==s){var v=b.categories[t].toString(),w=v.split("-"),x=Date.UTC(w[0],w[1]-1,w[2]);q=!isNaN(x),s++}}if("datetime"!==o.xAxis.type&&(q=!1),q){var y=864e5;o.plotOptions.series.pointStart=x,o.plotOptions.series.pointInterval=y,o.xAxis.type="datetime",o.xAxis.maxZoom=7*y,o.xAxis.labels=o.xAxis.labels||{},o.xAxis.labels.formatter=o.xAxis.labels.formatter||function(){var a=new Date(this.value),b=isNaN(a)?this.value:a.getMonth()+1+"-"+a.getDate();return b},o.xAxis.tickInterval=y;var z=60;o.xAxis.labels.step=Math.ceil(b.categories.length/(a(this).css("width").replace(/[^\d\.]/g,"")/z))}else{var z=6*r+50;if(o.xAxis.categories=g(b.categories),b.autoStep){var A=o.xAxis.tickInterval||1;o.xAxis.labels.step=Math.ceil(o.xAxis.categories.length/(a(this).css("width").replace(/[^\d\.]/g,"")/z)/A)}}b.xAxisLabelStep>0&&(o.xAxis.labels.step=b.xAxisLabelStep),o.series=h(b.series)}else o.chart.type="pie",o.series=h(b.series),o.tooltip=o.tooltip||{},o.tooltip.shared=!1,o.tooltip.useHTML=!1,o.tooltip.formatter=o.tooltip.formatter||function(){return"<b>"+this.point.name+"</b>: "+Math.round(100*this.percentage)/100+" %"};if(!n)return a(this).addClass("nodata"),void a(this).html("<H4>"+o.title.text+"</H4>");switch(a(this).removeClass("nodata"),o.chart.renderTo=a(this).attr("id"),null!=b.yMin&&null!=b.yMax&&(m=b.yMin,maxY=b.yMax,o.yAxis.min=b.yMin,o.yAxis.max=b.yMax),o.yAxis.labels=o.yAxis.labels||{},3==o.yAxis.dataFormat&&(o.tooltip.valueSuffix="%"),o.tooltip.valueSuffix&&(o.yAxis.labels.formatter=function(){var a=5==o.yAxis.dataFormat?Highcharts.numberFormat(100*this.value,0):this.value;return a+o.tooltip.valueSuffix}),"pie"!=o.chart.type&&(o.tooltip.formatter=function(){var b=o.yAxis.name?" ("+o.yAxis.name+")":"",d=q?f(this.x):this.x,e='<div style="padding:5px;"><b>'+d+b+'</b></div><table style="width: 150px">';return a.each(this.points,function(a,b){var d=c(o.yAxis.dataFormat,b.y),f=o.tooltip.valueSuffix||"";e+='<tr><td style="padding: 2px 5px" >'+b.series.name+' </td><td style="text-align: right;padding-left:15px">'+d+f+" </td></tr>"}),e+="</table>"}),4==o.yAxis.dataFormat&&(o.yAxis.labels.formatter=function(){return c(o.yAxis.dataFormat,this.value)}),b.labelFormat){case 0:o.plotOptions.series.dataLabels.enabled=!1;break;case 1:o.plotOptions.series.dataLabels.formatter=o.plotOptions.series.dataLabels.formatter||function(){return c(o.yAxis.dataFormat,this.y)};break;case 2:o.plotOptions.series.dataLabels.formatter=o.plotOptions.series.dataLabels.formatter||function(){return Highcharts.numberFormat(this.percentage,2)+"%"};break;default:o.plotOptions.series.dataLabels.enabled=!1}b.showPlotLine&&j(),b.autoYAxisInterval&&d();new Highcharts.Chart(o)}}(jQuery);