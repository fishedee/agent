GRI=window.GRI||{},GRI.Util={parse_url:function(a){var b,c,d,e,f={};if(void 0===a){var g=window.location;b=g.host,c=g.pathname,d=g.search.substr(1),e=g.hash}else{var h=a.match(/\w+:\/\/((?:[\w-]+\.)+\w+)(?:\:\d+)?(\/[^\?\\\"\'\|\:<>]*)?(?:\?([^\'\"\\<>#]*))?(?:#(\w+))?/i)||[];b=h[1],c=h[2],d=h[3],e=h[4]}return d&&function(){for(var a=d.split("&"),b=0,c=a.length;c>b;b++)if(-1!=a[b].indexOf("=")){var e=a[b].indexOf("="),g=a[b].slice(0,e),h=a[b].slice(e+1);f[g]=h}}(),{host:b,path:c,search:d,hash:e,param:f}},cookie:{getTopDomain:function(){var a=window.location.host,b={"com.cn":1,"net.cn":1,"gov.cn":1,"com.hk":1},c=a.split(".");return c.length>2&&function(){a=c.slice(b[c.slice(-2).join(".")]?-3:-2).join(".")}(),a},get:function(a){var b=document.cookie.match(new RegExp("(?:^|;\\s)"+a+"=(.*?)(?:;\\s|$)"));return b?b[1]:""},save:function(a,b,c){document.cookie=a+"="+b+";path=/;domain="+this.getTopDomain()+(c?";expires="+c:"")}},loading:{prefix:"mask4",show:function(a){if(a&&$("#"+this.prefix+a).length>0)return!1;var b=this,c=function(){return $("#"+a).length>0?{width:$("#"+a).width(),height:$("#"+a).height(),offset:$("#"+a).offset(),padding:$("#"+a).css("padding")}:null}();c&&$('<div id="'+b.prefix+a+'"><i class="icon-loading"></i>&nbsp;数据加载中...</div>').css({height:c.height+"px",left:c.offset.left+"px",position:"absolute",padding:c.padding,"padding-top":"25px",top:c.offset.top+"px","text-align":"center",width:c.width+"px",background:"#FFF",opacity:.4,"z-index":98}).appendTo("body")},clear:function(a){a&&$("#"+this.prefix+a).length>0?$("#"+this.prefix+a).remove():$('div[id^="'+this.prefix+'"]').each(function(){$(this).remove()})}},tool_tips:{show:function(a,b){var c='<div class="tips-small" style="display:none" > <p>'+a+"</p></div>",d=10,e=$(c);$("body").append(e);var f,g;$("#"+b).bind("mouseover",function(a){h(a),e.show().css({top:g,left:f})}).bind("mousemove",function(a){h(a),e.show().css({top:g,left:f})}).bind("mouseout",function(){e.hide()});var h=function(a){mouse=new i(a),f=mouse.x+d,g=mouse.y+d},i=function(a){this.x=a.pageX,this.y=a.pageY}}},mask:{self:"",create:function(){return this.self&&this.self.parent().length?void 0:($(window).bind("resize.overlay",this.resize),this.self=(this.self||$("<div></div>").css({height:"100%",left:0,position:"fixed",top:0,width:"100%",background:"#E8E9EE",opacity:.3,"z-index":777})).appendTo("body").css({width:this.width(),height:this.height()}))},destroy:function(){(!this.self||this.self.parent().length)&&($([document,window]).unbind("resize.overlay"),this.self.animate({opacity:"hide"},function(){$(this).remove().show()}))},height:function(){var a,b;return this.isIE6?(a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b>a?$(window).height()+"px":a+"px"):$(document).height()+"px"},width:function(){var a,b;return this.isIE6?(a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b>a?$(window).width()+"px":a+"px"):$(document).width()+"px"}}},GRI.Dialog=function(a,b){var c={type:1,title:"温馨提示",hideCloseIcon:!1,content:"",detail:"",tips:"",btnType:1,buttons:{text1:"",text2:""},winSize:1,extra:{top:"",left:"",width:"100%",zIndex:1001,heatmap:"",noPrompt:"",autoMask:!0,autoClose:!0}};!a.extra&&(a.extra=c.extra);var d=$.extend(!0,c,a),e=this;e.dialogId="";var f=function(){for(var a=d.extra,b=a.zIndex;$("#fwin_dialog_fs_100"+b)[0];)b++;var c="fs_100"+b,f="fwin_dialog_"+c,h=f+"_content",i=f+"_closeIcon",j=f+"_tips",k=f+"_btn1",l=f+"_btn2",m=f+"_btnCtn1";e.dialogId=f,e.btnId1=k,e.btnContainer1=m;var n="absolute";a.heatmap&&(n="absolute");var o,p,q=d.tips,r=d.btnType,s={1:["确定","取消"],2:["是","否"],3:["确定",""],4:["继续",""],5:["",""]};6!=r?(r=s[r]?r:1,o=s[r][0],p=s[r][1]):(o=d.buttons.text1,p=d.buttons.text2);var t="";(q||o||p)&&(t='	<div class="float_footer"> ',t+='			<div class="form-message warning"> 				<div id="'+j+'" class=" help-inline">'+q+"</div> 			</div> ",(o||p)&&(t+='		<div class="float-footer"> ',o&&function(){var a='<input type="submit" id="'+k+'"  value="'+o+'"  class="btn-normal btn-middle"/> ';t+=a}(),p&&(t+='<input type="reset" id="'+l+'" value="'+p+'"  class="btn-thin btn-middle"/> '),t+="</div>"),t+="</div>");var u={1:"min",2:"mid"}[d.winSize]||"mid",v={1:"",2:"frm_cont",3:"confirm",4:"confirm",5:"confirm",6:"confirm"}[d.type]||"",w={3:"success",4:"attent",5:"warn",6:"error"}[d.type]||"",x=' <div id="'+f+'" style="position: '+n+"; z-index: "+b+'" class="float cf '+u+'">		<div class="float-header"> 			<h3><a id="'+i+'" href="javascript:void(0);" class="close">&times;</a>'+d.title+'</h3>		</div>		<div class="float-cont cf" style="background-color:#ffffff"> 			<div class="'+v+" "+w+'" id="'+h+'"> 			</div> 		</div> '+t+"	</div> ";$("#"+f)[0]||$(x).appendTo("body");var y=d.content;w&&(y="<h4>"+d.content+'<br><p class="success_info">'+(void 0==d.desc?"":d.desc)+"</p></h4> 			<p>"+d.detail+"</p>"),$("#"+h).html(y),$("#"+f).show(),$("#"+h).css({width:"100%"}),dialogLeft=a.left||($(window).width()-$("#"+f).width())/2,dialogTop=a.top||($(window).height()-$("#"+f).height())/2,$("#"+f).css({top:dialogTop+"px",left:dialogLeft+"px"}),$("#"+k).click(function(){g("btn1")}),$("#"+l).click(function(){g("btn2")}),$("#"+i).click(function(){g("btnClose")}),d.hideCloseIcon&&$("#"+i).css("display","none");var z=a&&"undefined"!=typeof a.noPrompt?a.noPrompt:!1;z&&$("#promptOff").html('<input type="checkbox" id="noDataPromptOff" name="noDataPromptOff" value="1" style="position:relative;top:2px;"/> 不再提醒 '),d.extra.autoMask&&GRI.Util.mask.create();var A="frm_100_"+f;$("#"+A)&&$("#"+A).remove(),hidIframe='<iframe id="'+A+'"></iframe>',$(hidIframe).appendTo("body"),b=parseInt(b),b--,$("#"+A).css({width:$("#"+f).width(),height:$("#"+f).height(),position:n,top:$("#"+f).css("top"),left:$("#"+f).css("left"),"z-index":b,scrolling:"no",border:"0"})},g=function(a){"btn1"==a&&b?function(){b(),d.extra.autoClose&&e.hideWindows()}():e.hideWindows()};return this.hideWindows=function(){var a=e.dialogId;return $("#"+a).hide(),$("#"+a).remove(),$("#frm_100_"+a).remove(),$("div[id^='calendar_']")&&$("div[id^='calendar_']").css("display","none"),d.extra.autoMask&&GRI.Util.mask.destroy(),!1},this.closeWindows=this.hideWindows,this.showTips=function(a){var b=e.dialogId+"_tips";$("#"+b).html(a)},this.clearTips=function(){var a=e.dialogId+"_tips";$("#"+a).html("")},f(),this},GRI.Dialog.DIALOG_TYPE={COMMON:1,CONTROL:2,TEXT_INFO:3,TEXT_WARN:4,TEXT_WARN_RED:5,TEXT_ERROR:6},GRI.Dialog.BUTTON_TYPE={OK_CANCEL:1,YES_NO:2,OK:3,CONTINUE:4,NONE:5,CUSTOMIZE:6},GRI.Dialog.WIN_SIZE={MIN:1,MID:2},GRI.Exception={griErrorHandler:function(a){if(401===a.status){var b=window;window.top!=window.self&&(b=window.top),b.location.reload()}}},$.ajaxSetup({error:GRI.Exception.griErrorHandler});